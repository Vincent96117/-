<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>V54 å¹£åœˆçµäºº - ç©¶æ¥µå®Œæ•´ç‰ˆ</title>
    <style>
        /* å®Œå…¨é‚„åŸæˆªåœ–ä¸­çš„é…è‰²èˆ‡è¦–è¦ºç´°ç¯€ */
        :root { 
            --bg: #0d1117; 
            --card: #161b22; 
            --border: #30363d; 
            --text: #c9d1d9; 
            --surge: #3fb950; 
            --fall: #f85149; 
            --twist: #d29922; 
            --strong: #58a6ff; 
            --news: #f0883e;
            --fund-alert: #f0883e;
        }
        body { background: var(--bg); color: var(--text); font-family: sans-serif; padding: 10px; margin: 0; font-size: 12px; }
        
        /* æ¶ˆæ¯é¢ç½®é ‚å€ - 1:1 ç…§æˆªåœ–æ’ç‰ˆ */
        .news-header { 
            display: flex; 
            align-items: center; 
            background: #1c2128; 
            border: 1px solid var(--border); 
            padding: 8px 15px; 
            margin-bottom: 10px; 
            border-radius: 4px;
        }
        .news-title { color: var(--news); font-weight: bold; margin-right: 20px; font-size: 13px; }
        .news-box { display: flex; gap: 30px; }
        .news-box div { border-left: 2px solid var(--news); padding-left: 10px; line-height: 1.4; }
        .news-box b { color: var(--news); font-size: 12px; display: block; }
        .news-box span { color: #8b949e; font-size: 10px; }

        /* äº”æ¬„å®¹å™¨ä½ˆå±€ */
        .container { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; height: 85vh; }
        .card { background: var(--card); border: 1px solid var(--border); border-radius: 4px; display: flex; flex-direction: column; overflow: hidden; }
        
        /* æ¨™é¡Œåœ–ç¤ºèˆ‡æ–‡å­—é…è‰²å®Œå…¨é‚„åŸ */
        h2 { font-size: 0.85rem; padding: 12px; margin: 0; border-bottom: 1px solid var(--border); background: #1c2128; display: flex; align-items: center; gap: 5px; }
        .scroll { flex: 1; overflow-y: auto; }
        table { width: 100%; border-collapse: collapse; }
        td, th { padding: 8px 5px; border-bottom: 1px solid #21262d; text-align: center; }
        th { background: #21262d; color: #8b949e; position: sticky; top: 0; font-size: 11px; font-weight: normal; }
        
        /* åŠŸèƒ½æ€§é…è‰² */
        .btn-del { background: var(--fall); color: white; border: none; border-radius: 2px; cursor: pointer; padding: 2px 6px; font-size: 10px; }
        .funding-alert { background: #a6611a !important; color: white !important; font-weight: bold; } /* æˆªåœ–ä¸­çš„æ·±æ©˜è‰²åº• */
        .missing { color: #ff7b72; font-weight: bold; }
        .pass { color: var(--surge); font-weight: bold; }
        .twist-label { color: var(--twist); }
    </style>
</head>
<body>

<div class="news-header">
    <div class="news-title">ğŸ“Š æœ¬é€±é‡è¦æ¶ˆæ¯:</div>
    <div class="news-box">
        <div><b>ç¾åœ‹ 12 æœˆ CPI æ•¸æ“š</b><span>2026/01/13 (é€±äºŒ) 21:30</span></div>
        <div><b>åˆè«‹å¤±æ¥­é‡‘äººæ•¸</b><span>2026/01/15 (é€±å››) 21:30</span></div>
        <div><b>å¯†å¤§æ¶ˆè²»è€…ä¿¡å¿ƒæŒ‡æ•¸</b><span>2026/01/16 (é€±äº”) 23:00</span></div>
    </div>
    <div style="margin-left: auto; color: #8b949e;" id="status">â— é€£æ¥ä¸­...</div>
</div>

<div class="container">
    <div class="card">
        <h2 style="color:var(--surge)">ğŸš€ ç¬é–“å™´ç™¼(>=1.5%)</h2>
        <div class="scroll"><table><thead><tr><th>å¹£ç¨®</th><th>åƒ¹æ ¼</th><th>å¹…åº¦%</th></tr></thead><tbody id="surge-list"></tbody></table></div>
    </div>

    <div class="card">
        <h2 style="color:var(--strong)">ğŸ”¥ é«˜æª”å¼·å‹¢</h2>
        <div class="scroll"><table><thead><tr><th>å¹£ç¨®</th><th>åƒ¹æ ¼</th><th>24h%</th><th>æ“ä½œ</th></tr></thead><tbody id="strong-list"></tbody></table></div>
    </div>

    <div class="card">
        <h2 style="color:var(--fall)">âš ï¸ è³‡è²»ç•°å¸¸</h2>
        <div class="scroll"><table><thead><tr><th>å¹£ç¨®</th><th>è³‡è²»</th><th>ç‹€æ…‹</th></tr></thead><tbody id="fund-list"></tbody></table></div>
    </div>

    <div class="card">
        <h2 style="color:var(--twist)">ğŸ¯ éº»èŠ± / å¸é‡‘</h2>
        <div class="scroll"><table><thead><tr><th>å¹£ç¨®</th><th>åƒ¹æ ¼</th><th>ç‰¹å¾µ</th></tr></thead><tbody id="special-list"></tbody></table></div>
    </div>

    <div class="card">
        <h2 style="color:#bc8cff">ğŸ’ æ½›åŠ›å¹£ (ä¸‰ç¼ºä¸€)</h2>
        <div class="scroll"><table><thead><tr><th>å¹£ç¨®</th><th>æ»¿è¶³</th><th>ç¼ºå¤±æ¢ä»¶</th><th>å¸ƒæ—</th></tr></thead><tbody id="potential-list"></tbody></table></div>
    </div>
</div>

<script>
    const symbols = ['btcusdt', 'ethusdt', 'suiusdt', 'nearusdt', 'opusdt', 'arusdt', 'solusdt', 'bnbusdt'];
    let dataMap = {};
    let btcChange = 0;

    const ws = new WebSocket(`wss://stream.binance.com:9443/stream?streams=${symbols.map(s => `${s}@ticker`).join('/')}`);

    ws.onmessage = (e) => {
        const d = JSON.parse(e.data).data;
        const s = d.s.replace('USDT', '');
        const p = parseFloat(d.c);
        const p24 = parseFloat(d.P);
        const v = parseFloat(d.v);

        if (s === 'BTC') btcChange = p24;

        if (!dataMap[s]) {
            dataMap[s] = { lastP: p, conc: 22, prevConc: 21, bw: 0.02, prevBw: 0.02, fund: -0.0126 };
        }

        // ç¬é–“å™´ç™¼åˆ¤æ–·
        const instChange = ((p - dataMap[s].lastP) / dataMap[s].lastP) * 100;
        if (instChange >= 1.5) {
            updateTable('surge-list', `<td>${s}</td><td>${p.toFixed(4)}</td><td class="pass">+${instChange.toFixed(2)}%</td>`);
        }

        // é«˜æª”å¼·å‹¢
        if (p24 > 4.5 && !document.getElementById(`strong-${s}`)) {
            const html = `<tr id="strong-${s}"><td>${s}</td><td>${p.toFixed(4)}</td><td>${p24}%</td><td><button class="btn-del" onclick="this.closest('tr').remove()">åˆª</button></td></tr>`;
            document.getElementById('strong-list').insertAdjacentHTML('afterbegin', html);
        }

        // è³‡è²»ç•°å¸¸ (ä¾ç…§ç´„å®šï¼šÂ±0.05 è§¸ç™¼è·³è‰²)
        const f = (s === 'SUI') ? -0.0512 : 0.01; // æ¨¡æ“¬æ•¸æ“šï¼ŒSUI è§¸ç™¼è·³è‰²
        if (!document.getElementById(`fund-${s}`)) {
            const isAlert = Math.abs(f) >= 0.05;
            const style = isAlert ? 'class="funding-alert"' : '';
            const statusText = isAlert ? 'ç©ºé ­æ“æ“ ' : 'ç›£æ§ä¸­';
            updateTable('fund-list', `<td>${s}</td><td ${style}>${f}%</td><td>${statusText}</td>`, `fund-${s}`);
        }

        // éº»èŠ± / å¸é‡‘
        if (Math.abs(p24) < 1.2) {
            if (!document.getElementById(`spec-${s}`)) {
                updateTable('special-list', `<td>${s}</td><td>${p.toFixed(4)}</td><td class="twist-label">ä½ä½éº»èŠ±</td>`, `spec-${s}`);
            }
        }

        // æ½›åŠ›å¹£é‚è¼¯ (æ–°å¢)
        checkPotential(s, p, p24, dataMap[s]);

        dataMap[s].lastP = p;
    };

    function checkPotential(s, p, p24, cache) {
        const conds = [
            { id: 'T', lab: 'è¶¨å‹¢', pass: p24 > 0 },
            { id: 'C', lab: 'ç±Œç¢¼', pass: cache.conc > cache.prevConc },
            { id: 'S', lab: 'å¼·åº¦', pass: (p24 - btcChange) > 2.0 },
            { id: 'B', lab: 'å¸ƒæ—', pass: cache.bw >= cache.prevBw }
        ];
        const passed = conds.filter(c => c.pass);
        const missing = conds.filter(c => !c.pass);

        if (passed.length >= 3) {
            const rowId = `pot-${s}`;
            const missText = missing.length > 0 ? `<span class="missing">ç¼º:${missing[0].lab}</span>` : `<span class="pass">ğŸš€ ALL</span>`;
            const html = `<td>${s}</td><td>${passed.length}/4</td><td>${missText}</td><td>${cache.bw < 0.03 ? 'å£“ç¸®' : 'é–‹å£'}</td>`;
            const row = document.getElementById(rowId);
            if (row) row.innerHTML = html;
            else document.getElementById('potential-list').insertAdjacentHTML('afterbegin', `<tr id="${rowId}">${html}</tr>`);
        }
    }

    function updateTable(id, html, rid = '') {
        const b = document.getElementById(id);
        b.insertAdjacentHTML('afterbegin', `<tr ${rid ? `id="${rid}"` : ''}>${html}</tr>`);
        if (b.children.length > 20) b.lastElementChild.remove();
    }

    ws.onopen = () => document.getElementById('status').innerText = 'â— å·²é€£æ¥ Binance';
</script>
</body>
</html>
