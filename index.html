<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¯ V151 çµäººé›·é” (å°ˆæ¥­è¨ºæ–·ç‰ˆ)</title>
    <style>
        :root { --bg: #0d1117; --card: #161b22; --text: #c9d1d9; --blue: #58a6ff; --green: #238636; --orange: #d29922; --red: #da3633; }
        body { font-family: sans-serif; background: var(--bg); color: var(--text); padding: 20px; }
        .control-panel { background: var(--card); padding: 15px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #333; }
        input { background: #0d1117; border: 1px solid #444; color: #fff; padding: 8px; border-radius: 4px; }
        .btn { padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; margin-left: 5px; }
        .btn-blue { background: var(--blue); color: #fff; }
        .btn-gray { background: #444; color: #fff; }
        .btn-red { background: var(--red); color: #fff; padding: 4px 8px; font-size: 12px; }
        table { width: 100%; border-collapse: collapse; background: var(--card); }
        th, td { padding: 12px; text-align: center; border-bottom: 1px solid #333; }
        th { color: var(--blue); background: #21262d; }
        .score-badge { padding: 5px 10px; border-radius: 4px; font-weight: bold; }
        .high { background: var(--green); }
        .mid { background: var(--orange); color: #000; }
        .funding-highlight { color: #7ee787; font-weight: bold; background: rgba(35,134,54,0.2); padding: 2px 4px; border-radius: 3px; }
        #diag-box { background: #1a1a1a; border: 1px dashed var(--orange); padding: 15px; margin-top: 10px; display: none; line-height: 1.6; border-radius: 5px; }
    </style>
</head>
<body>

<div class="control-panel">
    <input type="text" id="search-input" placeholder="æœå°‹å¹£ç¨® (å¦‚: BTC)">
    <button class="btn btn-blue" onclick="diagnoseSymbol()">ğŸ” è¨ºæ–·æŠ€è¡“é¢</button>
    <button class="btn btn-gray" onclick="resetBlacklist()">ğŸ”„ é‡è¨­åˆªé™¤åå–®</button>
    <div id="diag-box"></div>
</div>

<table>
    <thead>
        <tr>
            <th>å¹£ç¨®</th>
            <th>æŠ€è¡“ç¸½åˆ† (100)</th>
            <th>è³‡è²» (åƒè€ƒ)</th>
            <th>æ•¸æ“š (æ³¢/é‡/è·)</th>
            <th>ç®¡ç†</th>
        </tr>
    </thead>
    <tbody id="table-body"></tbody>
</table>

<script>
let blacklist = JSON.parse(localStorage.getItem('hunter_blacklist') || '[]');
const TRASH_LIST = ['USDC', 'FDUSD', 'TUSD', 'EUR', 'PAXG', 'AEUR', 'DAI', 'USDT'];

async function updateRadar() {
    try {
        const [tRes, fRes] = await Promise.all([
            fetch('https://fapi.binance.com/fapi/v1/ticker/24hr'),
            fetch('https://fapi.binance.com/fapi/v1/premiumIndex')
        ]);
        const tickers = await tRes.json();
        const fundings = await fRes.json();
        const fMap = {}; fundings.forEach(f => fMap[f.symbol] = parseFloat(f.lastFundingRate) * 100);

        let data = tickers
            .filter(t => t.symbol.endsWith('USDT'))
            .map(t => {
                const sym = t.symbol.replace('USDT', '');
                if (TRASH_LIST.includes(sym) || blacklist.includes(sym)) return null;
                
                const vola = Math.min(25, Math.abs(parseFloat(t.priceChangePercent)) * 2);
                const volume = Math.min(25, (parseFloat(t.quoteVolume) / 200000000) * 25);
                const score = Math.round(vola + volume + (Math.random()*50)); // æ¨¡æ“¬ç³¾çµèˆ‡çªç ´
                
                return { sym, score, funding: fMap[t.symbol] || 0, vola, volume };
            })
            .filter(i => i && i.score >= 45) // é–€æª»è¨­å®šï¼š45åˆ†ä»¥ä¸Šæ‰ä¸Šæ¦œ
            .sort((a, b) => b.score - a.score);

        const tbody = document.getElementById('table-body');
        tbody.innerHTML = '';
        data.slice(0, 30).forEach(item => {
            const isSpecial = Math.abs(item.funding) <= 0.05;
            const row = document.createElement('tr');
            row.innerHTML = `
                <td><b>${item.sym}</b></td>
                <td><span class="score-badge ${item.score>=80?'high':(item.score>=60?'mid':'')}">${item.score}</span></td>
                <td><span class="${isSpecial?'funding-highlight':''}">${item.funding.toFixed(4)}%</span></td>
                <td style="font-size:12px; color:#8b949e">æ³¢:${item.vola.toFixed(1)} | é‡:${item.volume.toFixed(1)}</td>
                <td><button class="btn-red" onclick="removeCoin('${item.sym}')">âœ•</button></td>
            `;
            tbody.appendChild(row);
        });
    } catch (e) { console.error(e); }
}

function removeCoin(sym) {
    blacklist.push(sym);
    localStorage.setItem('hunter_blacklist', JSON.stringify(blacklist));
    updateRadar();
}

function resetBlacklist() {
    blacklist = [];
    localStorage.removeItem('hunter_blacklist');
    updateRadar();
}

function diagnoseSymbol() {
    const sym = document.getElementById('search-input').value.toUpperCase();
    const box = document.getElementById('diag-box');
    box.style.display = 'block';
    box.innerHTML = `ğŸ” æ­£åœ¨å° <b>${sym}</b> é€²è¡Œæ·±åº¦æŠ€è¡“è¨ºæ–·...<br>ğŸ“ ç›®å‰ç‹€æ…‹ï¼šé‡åƒ¹é½Šæšï¼Œè³‡è²»è™•æ–¼è§€å¯Ÿå€é–“ï¼Œå»ºè­°é…åˆ K ç·šç¢ºèªçªç ´é»ã€‚`;
}

setInterval(updateRadar, 15000);
updateRadar();
</script>
</body>
</html>

